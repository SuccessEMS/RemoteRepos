<?xml version="1.0" encoding="utf-8"?>
<html MadCap:lastBlockDepth="6" MadCap:lastHeight="1851" MadCap:lastWidth="2580" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title mt-export-translate="no">Open ID Connect Authentication</title>
        <meta name="mt-type" value="application/x.deki-text" />
        <meta name="mt-unsafe" value="true" />
    </head>
    <body>
        <h1 class="mt-export-title">Open ID <MadCap:annotation MadCap:createDate="2017-10-24T15:19:17.7649653-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="This topic is not listed in the MindTouch guide for Mobile Install/Config. Need to determine if topic should be included in documentation or archived." MadCap:editor="Megan.Laub" MadCap:editDate="2017-10-24T15:19:18.3968671-06:00">Connect</MadCap:annotation> Authentication</h1>
        <p>This section guides you authenticating your users via the Open ID Connect protocol.&#160;Authentication with Open ID requires configuration in&#160;{{product_mobile}} before users can authenticate.</p><pre class="script-css" mt-export-translate="no" xml:space="preserve">
.columbia-article-topic #mt-toc-container {
    display:block !important; 
}
#mt-toc-container {
    display: block !important;
}
</pre>
        <div class="EXPAND_CLASS">
            <p>&#160;</p>
            <div class="EXPAND_CLASS"><pre class="script" mt-export-translate="no" xml:space="preserve">
wiki.page("EMS_V44.1/Installing_and_Setting_Up_EMS/EMS_Mobile_App_EMS_Mobile_Spring_2017/Installing_and_Setting_Up_the_EMS_Mobile_App/Setting_Up_EMS_Mobile_Authentication/Open_ID_Connect_Authentication_Can_Be_Hosted_or_Pre-Configured_in_{{product_mobile}}:")</pre>
            </div>
        </div>
        <p class="mt-indent-1">
            <br />&#160;</p>
        <p>OpenID&#160;authentication configuration requires two inputs:&#160;</p>
        <ol start="1">
            <li>U<span class="mt-font-size-11.0pt">ser Info</span> Endpoint.&#160;The EMS Platform Services will send the <span class="mt-font-size-11.0pt">access_token</span> to this endpoint to retrieve information about the end user.</li>
            <li>Specify whether the EMS Platform Services&#160;should make a <span class="mt-font-size-11.0pt">GET</span> or <span class="mt-font-size-11.0pt">POST</span> request to the <span class="mt-font-size-11.0pt">userinfo</span> endpoint.</li>
        </ol>
        <h3>Register Your {{product_mobile}} with idP</h3>
        <p>This is your responsibility. The client_id generated by this registration is required.&#160;</p>
        <h3>Customizing Your Configuration</h3>
        <p>Follow the steps below to customize your Open ID Connect configuration.</p>
        <h4 class="mt-indent-1">Create a Configuration File</h4>
        <ol class="mt-indent-1">
            <li>Refer to <a title="https://success.emssoftware.com/EMS_V44.1/Installing_and_Setting_Up_EMS/EMS_Mobile_App_EMS_Mobile_Spring_2017/Installing_and_Setting_Up_the_EMS_Mobile_App/Setting_Up_EMS_Mobile_Authentication/Customizing_Your_Mobile_App_Configuration_Using_config.json">Customizing&#160;Your Configuration Using config.json</a>&#160;for details on building a configuration file for {{product_mobile}}.</li>
            <li>Once you have created your configuration file, you may proceed with one of the sections below, depending on whether you intend to host the file or pre-configure the application and redistribute it.</li>
        </ol>
        <h5 class="mt-indent-2">Using Hosted Configuration</h5>
        <p class="mt-indent-2">Host your configuration file from a web server an distribute the URL to your end users via&#160;the Import SSO&#160;Config feature in {{product_mobile}}.&#160;Users should only have to perform this import one time per installation of the application.</p>
        <table border="0" cellpadding="0" cellspacing="0" class="tip" style="border-collapse: collapse;">
            <tbody>
                <tr>
                    <td style="border-style: solid none none;border-top-color: black;border-top-width: 1pt;width: 68px;" valign="top">
                        <p class="mt-indent-2">
                            <img alt="" class="internal default" style="width: 26px;height: 25px;" width="26px" height="25px" />
                        </p>
                    </td>
                    <td style="border-style: solid none none;border-top-color: black;border-top-width: 1pt;width: 863px;" valign="top">
                        <p class="NoteTipWarningText"><strong><span class="mt-color-b22222">Warning</span><span class="mt-color-336699">:</span></strong>It is not recommended to make this configuration file available publicly, since it will likely have URLs and/or other information in it that you do not want made available. Instead, host the file such that it is only available internally to your organization.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="mt-indent-2">&#160;</p>
        <h5 class="mt-indent-2">Pre-Configuring {{product_mobile}}</h5>
        <p class="mt-indent-2">If you wish to pre-configure the mobile app, see <a title="Configuring and Resigning {{product_mobile}}">Configuring and Re-Signing {{product_mobile}}</a>.</p>
        <h4 class="mt-indent-1">Testing Your&#160;Open ID Connect Configuration</h4>
        <p class="mt-indent-1">Assuming you have installed the <a title="Installing the EMS Platform Services API">EMS Platform Services</a> API at <span class="mt-font-size-11.0pt"><a class="link-https" href="https://ems.yourcompany.com/endpoint" rel="freeklink" title="https://ems.yourcompany.com/endpoint">https://ems.yourcompany.com/endpoint</a></span>, then you can test the configuration with a simple <span class="mt-font-size-11.0pt">curl</span> command:</p>
        <blockquote>
            <p class="mt-indent-1">curl -X GET -H 'x-ems-consumer: MobileApp' <a class="link-https" href="https://ems.yourcompany.com/endpoint/api/v1/health" rel="freeklink" title="https://ems.yourcompany.com/endpoint/api/v1/health">https://ems.yourcompany.com/endpoint/api/v1/health</a></p>
        </blockquote>
        <table border="0" cellpadding="0" cellspacing="0" class="tip" style="border-collapse: collapse;">
            <tbody>
                <tr>
                    <td style="border-style: solid none none;border-top-color: black;border-top-width: 1pt;width: 68px;" valign="top">
                        <p class="mt-indent-1">
                            <img src="../../../../../Resources/Images/tech_doc_tip.png" alt="" class="internal default" style="width: 35px;height: 35px;" width="35px" height="35px" />
                        </p>
                    </td>
                    <td style="border-style: solid none none;border-top-color: black;border-top-width: 1pt;width: 863px;" valign="top">
                        <p class="NoteTipWarningText"><strong><span class="mt-color-669933">Tip:</span></strong>You can also use the API's Swagger interface to accomplish this goal.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="mt-indent-1">You should see a portion of the JSON response that looks like this (unrelated details omitted for brevity):</p>
        <blockquote>
            <p class="mt-indent-1">{<br />&#160;&#160;&#160; ...<br />&#160;&#160;&#160; "additionalProperties": {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; "authConfig": {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; "activities": "openId"&#160; // <span style="color: #0099cc;">&lt;-- these are the critical lines</span><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; "ui":"openId"<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }<br />&#160;&#160;&#160; }<br />}</p>
        </blockquote>
        <h4 class="mt-indent-1">Testing Your Open ID Connect Authentication</h4>
        <p class="mt-indent-1">Assuming you have installed the EMS Platform Services API at <span class="mt-font-size-11.0pt"><a class="link-https" href="https://ems" rel="freeklink" title="https://ems">https://ems</a>.<em>yourcompany</em>.com/endpoint</span>, you can test the authentication with a <span class="mt-font-size-11.0pt">curl</span> command:</p>
        <blockquote>
            <p class="mt-indent-1">curl -X POST -H 'x-ems-consumer: MobileApp' -H 'Content-Type: application/json' -d '{"token":"your_access_token"}' <a class="link-https" href="https://ems.yourcompany.com/endpoint...authentication" rel="freeklink" title="https://ems.yourcompany.com/endpoint...authentication">https://ems.yourcompany.com/endpoint...authentication</a></p>
        </blockquote>
        <p class="mt-indent-1">...where <span class="mt-font-size-11.0pt">your<em>_access_token</em></span> is a valid <em><span class="mt-font-size-11.0pt">access_token</span></em> retrieved from your IdP.</p>
        <table border="0" cellpadding="0" cellspacing="0" class="tip" style="border-collapse: collapse;">
            <tbody>
                <tr>
                    <td style="border-style: solid none none;border-top-color: black;border-top-width: 1pt;width: 68px;" valign="top">
                        <p class="mt-indent-1">
                            <img src="../../../../../Resources/Images/tech_doc_note.png" alt="" class="internal default" style="width: 50px;height: 50px;" width="50px" height="50px" />
                        </p>
                    </td>
                    <td style="border-style: solid none none;border-top-color: black;border-top-width: 1pt;width: 863px;" valign="top">
                        <p class="NoteTipWarningText"><span class="mt-color-669900"><strong>Note:&#160;</strong></span><strong><span class="mt-font-size-11.0pt">api/v1/authentication</span></strong> is the endpoint within the API where your request must be sent.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <hr class="mt-export-separator" />
        <p class="template:tag-insert"><strong>Page tags: </strong><a mt-export-translate="no">article:topic</a>
        </p>
    </body>
</html>